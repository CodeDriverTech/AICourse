---
trigger: model_decision
description: 本规范为AI在项目开发过程中撰写和维护文档提供了指导。清晰、全面的文档是项目成功的关键，尤其对于独立开发者而言，它能有效降低未来维护的认知成本。本指南强调了两种核心文档：代码内部的Docstrings和项目级别的README文件。AI在生成代码和构建项目时，必须同步创建和更新这些文档，确保它们能准确反映代码的功能和项目的使用方法，从而实现代码即文档、项目自解释的目标。
---

# 规范：项目文档撰写指南 (Documentation Guide)

## 核心理念

文档不是事后工作，而是开发流程中不可或缺的一部分。良好的文档能够：
- 降低您在未来回顾项目时的认知负荷。
- 使项目更容易被潜在的合作者或用户理解。
- 强制您清晰地思考代码的结构和用途。

AI在整个开发周期中，都应主动、规范地创建和维护文档。

---

## 1. 代码内文档 (In-Code Documentation): Docstrings

这是最重要、最基础的文档形式。

- **要求**: 所有公开的模块、函数、类和方法都**必须**有符合Google风格的Docstrings。
- **责任**: AI在生成任何函数或类时，**必须**同时为其生成完整的Docstrings。
- **标准**: 详细规范请参见 `basic/02_python-style-guide.md` 中的Docstrings部分。Docstrings应解释“做什么”、“为什么”，并清晰地列出参数、返回值和可能引发的异常。

---

## 2. 文档哲学：为何以及如何撰写

在AI辅助开发模式下，文档不仅是写给人看的，更是**写给AI看的**。高质量的文档是让AI精准理解需求、遵循架构、生成一致性代码的关键输入。

我们的核心原则是：
- **AI友好 (AI-Friendly)**：文档结构清晰、格式统一、语言明确，大量使用模板和清单，便于AI解析和执行。
- **务实且敏捷 (Pragmatic & Agile)**：避免不必要的官僚主义，只创建能带来明确价值的文档。文档应随项目迭代而演进。
- **单一可信源 (Single Source of Truth)**：代码（含注释）是最终的可信源，其他文档应作为其补充，并努力保持同步。
- **自动化优先 (Automation-First)**：尽可能通过工具从代码和提交历史中自动生成文档，如API文档、更新日志（CHANGELOG）。

## 3. 文档阶段与产出物

下表定义了在产品开发的不同阶段，你（或AI）需要创建和维护的文档。

| 开发阶段 | 文档产出物 | 状态 | 目标与核心内容 | 依赖的规范/模板 |
| :--- | :--- | :--- | :--- | :--- |
| **P0: 想法与验证 (Ideation & Validation)** | **项目史诗 (Project Epic)** | **必须** | 定义产品的宏观愿景、战略价值、目标用户和成功标准。作为整个项目的“北极星”。 | `Project Epic Template` |
| | 商业模式/精益画布 | 可选 | 快速梳理商业模式、用户群体、核心价值和收益来源，适合创业初期验证想法。 | N/A |
| **P1: 产品与技术设计 (Design)** | **工程票据/用户故事 (Engineering Tickets/User Stories)** | **必须** | 将“史诗”拆解为可执行的开发任务，明确每个任务的验收标准（AC）。 | `Engineering Ticket Template` |
| | **README.md** | **必须** | 项目的入口。提供项目简介、技术栈、环境设置、启动方法和核心命令。 | `Code Guidelines` |
| | 架构设计记录 (Architecture Decision Record - ADR) | 可选 | 当面临重要的、有长远影响的技术选型时（如更换数据库、引入新的核心框架），记录决策过程、权衡和结论。 | N/A |
| | **API 文档 (API Documentation)** | **必须** | (针对FastAPI等项目) 利用框架自动生成交互式API文档。代码注解即文档。 | `Python (FastAPI)` |
| **P2: 编码与实现 (Implementation)** | **代码级文档 (Code-level Docs)** | **必须** | - **Docstrings**: 使用Google风格为所有模块、类、函数提供清晰的文档字符串。<br>- **代码注释**: 只对复杂的、非显而易见的逻辑（“Why” not “What”）进行注释。 | `Python LLM & ML Workflow` |
| | **配置文档 (Configuration Docs)** | **必须** | 在 `.env.example`, `config.yaml` 等配置文件中为每个变量提供注释，解释其用途和可选值。 | `Code Guidelines` |
| | **Git 提交信息 (Git Commit Messages)** | **必须** | 遵循“约定式提交”规范，让每一次提交都成为一次微型文档，清晰说明变更类型和内容。 | `Git Commit Messages` |
| **P3: 测试与品控 (Testing & QA)** | **测试计划 (Testing Plan)** | **必须** | 在每个“工程票据”中明确测试要点和范围（可作为其中一部分）。 | `Engineering Ticket Template` |
| | 端到端测试用例 (E2E Test Cases) | 可选 | 对于关键业务流程，可编写详细的端到端测试用例，描述用户场景和预期结果。 | N/A |
| **P4: 部署与维护 (Deployment & Maintenance)** | **CI/CD 文档** | **必须** | 在 `.github/workflows/` 或类似CI/CD配置文件中添加注释，解释流水线的各个阶段和关键步骤。 | `Python 最佳实践` |
| | **更新日志 (CHANGELOG.md)** | **必须** | 利用“约定式提交”记录，通过工具（如`standard-version`）自动生成版本更新日志。 | `Git Commit Messages` |

## 3. 文档撰写通用原则

无论AI或你本人撰写何种文档，都应遵循以下原则：

### 3.1 结构化与模板化
- **严格遵循模板**：所有“史诗”和“工程票据”**必须**使用 `Project Epic Template` 和 `Engineering Ticket Template` 进行创建。这是确保AI能够稳定解析需求的核心。
- **使用Markdown**：所有文档均使用Markdown格式，利用其标题、列表、表格等功能来构建清晰的层次结构。

### 3.2 内容撰写指南
- **明确验收标准 (Acceptance Criteria - AC)**：所有功能性需求（无论是史诗还是票据）都必须有清晰、可量化、可测试的AC。这是AI生成测试用例和验证代码正确性的基础。
- **提供上下文，而不仅仅是指令**：在描述任务时，简要说明其“**为什么**”（即业务价值或用户痛点），能帮助AI做出更优的技术决策。
- **使用示例 (Provide Examples)**：在解释复杂逻辑或数据格式时，提供具体的输入和输出示例。例如，在API文档中提供请求和响应的JSON示例。
- **定义“完成”的标准 (Definition of Done - DoD)**：对于用户故事，明确DoD，如“代码已合并”、“通过所有测试”、“文档已更新”等，建立清晰的交付标准。

### 3.3 维护与演进
- **文档与代码同步**：当代码逻辑发生变更时，应立即更新相关的文档（特别是`README.md`和代码注释/Docstrings）。可以设定代码审查（Code Review）流程来强制检查。
- **定期审查**：对于“项目史诗”等高级别文档，在每个重要里程碑或季度规划时进行回顾和调整，确保其与产品方向保持一致。
- **归档过时文档**：如果某项功能或设计被废弃，应明确地在其文档中标记为“已废弃 (Deprecated)”或直接归档，避免对后续开发造成困惑。